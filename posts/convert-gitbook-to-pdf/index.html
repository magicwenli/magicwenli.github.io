<!doctype html><html lang=en class=han-la><head><title>通过Gitbook将Markdown电子书转换为PDF格式 :: Great Expectations</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="以《[the-way-to-go_ZH_CN](https://github.com/unknwon/the-way-to-go_ZH_CN)》为例，将它转换为PDF文档。"><meta name=keywords content="gitbook,pdf"><meta name=robots content="noodp"><link rel=canonical href=/posts/convert-gitbook-to-pdf/><link rel=stylesheet href=/assets/style.css><link rel=apple-touch-icon href=/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=/img/favicon/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Magicewenli"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="通过Gitbook将Markdown电子书转换为PDF格式"><meta property="og:description" content="以《[the-way-to-go_ZH_CN](https://github.com/unknwon/the-way-to-go_ZH_CN)》为例，将它转换为PDF文档。"><meta property="og:url" content="/posts/convert-gitbook-to-pdf/"><meta property="og:site_name" content="Great Expectations"><meta property="og:image" content="/"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:published_time" content="2021-11-10 17:18:22 +0800 +0800"><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js></script>
<script type=text/javascript src=https://cdn.jsdelivr.net/gh/mastermay/text-autospace.js/text-autospace.min.js></script><style>html.han-la hanla:after{content:" ";display:inline;font-family:Arial;font-size:.89em}html.han-la code hanla,html.han-la pre hanla,html.han-la kbd hanla,html.han-la table hanla,html.han-la samp hanla{display:none}html.han-la ol>hanla,html.han-la ul>hanla{display:none}</style><link href=https://cdn.bootcdn.net/ajax/libs/KaTeX/0.13.13/katex.min.css rel=stylesheet><script src=https://cdn.bootcdn.net/ajax/libs/KaTeX/0.13.13/katex.min.js></script>
<script defer src=https://cdn.bootcdn.net/ajax/libs/KaTeX/0.13.13/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>Magicwenli $</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=https://github.com/magicwenli>Github</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=https://github.com/magicwenli>Github</a></li></ul></nav></header><div class=content><div style=min-width:100%><div class=post><h1 class=post-title><a href=/posts/convert-gitbook-to-pdf/>通过Gitbook将Markdown电子书转换为PDF格式</a></h1><div class=post-meta><span class=post-date>2021-11-10
[Updated: 2021-11-10]</span>
<span class=post-author>:: Magicewenli</span>
<span class=post-reading-time>:: 1 min read (299 words)</span></div><span class=post-tags>#<a href=/tags/gitbook/>gitbook</a>&nbsp;</span><div class=post-content><div><h2 id=找到一本电子书>找到一本电子书<a href=#找到一本电子书 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>以《<a href=https://github.com/unknwon/the-way-to-go_ZH_CN>the-way-to-go_ZH_CN</a>》为例，先<code>clone</code>下来。</p><h2 id=预处理>预处理<a href=#预处理 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>GitBook使用简单的目录结构，通过 <code>SUMMARY.md</code> 目录文件来确定哪些文件被转换。原书目录是<code>TOC.md</code>，因此将<code>TOC.md</code>改名为<code>SUMMARY.md</code>。</p><p>原书的图片链接都带上了<code>?raw=true</code>参数，导致转换后的PDF文件里图片无法正确显示，需要全部删除</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grep -rl <span style=color:#e6db74>&#34;?raw=true&#34;</span> ./ | xargs sed -i <span style=color:#e6db74>&#34;&#34;</span> <span style=color:#e6db74>&#39;s/?raw=true//g&#39;</span>
</span></span></code></pre></div><h2 id=开始转换>开始转换<a href=#开始转换 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>安装<a href=https://calibre-ebook.com>calibre</a>，主要是需要<code>ebook-converter</code>这个命令行工具</p><ol><li>创建一个符号连接</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ln -s /Applications/calibre.app/Contents/MacOS/ebook-convert /usr/local/bin
</span></span></code></pre></div><p><code>/usr/local/bin</code>可以是<code>$PATH$</code>中的任何文件夹</p><ol start=2><li>安装<code>gitbook-cli</code>，这时会自动编译安装<code>gitbook</code></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install gitbook-cli -g
</span></span></code></pre></div><ol start=3><li>转换之</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>gitbook pdf ./ ./book.pdf
</span></span></code></pre></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=/posts/r-lang-useful-tricks/><span class=button__icon>←</span>
<span class=button__text>R语言列表操作和连接MongoDB经验之谈</span></a></span>
<span class="button next"><a href=/posts/hello/><span class=button__text>Hello World</span>
<span class=button__icon>→</span></a></span></div></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=/assets/main.js></script>
<script src=/assets/prism.js></script></div></body></html>